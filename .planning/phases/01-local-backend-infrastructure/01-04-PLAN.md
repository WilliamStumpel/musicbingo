---
phase: 01-local-backend-infrastructure
plan: 01-04
title: Connection QR Code for Scanner App
type: feature
wave: 1
depends_on: []
files_modified:
  - musicbingo_host/package.json
  - musicbingo_host/src/services/gameApi.js
  - musicbingo_host/src/components/ConnectionInfo.jsx
  - musicbingo_host/src/components/ConnectionInfo.css
  - musicbingo_host/src/pages/HostView.jsx
  - musicbingo_host/src/pages/HostView.css
autonomous: true
---

<objective>
Add a QR code to the host app that displays the server URL, making it easy to connect the scanner app from a phone without manually typing the IP address.

Currently users must manually type the server IP in the scanner app's ServerConnect screen. This QR code provides a quick way to get the URL.
</objective>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md

**Related scanner connection work:**
@.planning/phases/01-local-backend-infrastructure/01-03-PLAN.md

**Host app structure:**
@musicbingo_host/src/pages/HostView.jsx
@musicbingo_host/src/services/gameApi.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add QR code library</name>
  <files>musicbingo_host/package.json</files>
  <action>
Install qrcode.react - lightweight React QR code generator:
```bash
cd musicbingo_host && npm install qrcode.react
```
  </action>
  <verify>Package appears in package.json dependencies</verify>
  <done>qrcode.react installed</done>
</task>

<task type="auto">
  <name>Task 2: Export API_BASE from gameApi</name>
  <files>musicbingo_host/src/services/gameApi.js</files>
  <action>
Export the API_BASE constant so ConnectionInfo can access it:
```javascript
export const API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:8000';
```
  </action>
  <verify>API_BASE is exported</verify>
  <done>API_BASE exported</done>
</task>

<task type="auto">
  <name>Task 3: Create ConnectionInfo component</name>
  <files>musicbingo_host/src/components/ConnectionInfo.jsx, musicbingo_host/src/components/ConnectionInfo.css</files>
  <action>
Create modal component that displays:
- QR code containing the server URL (green on dark background)
- Text display of the URL for manual entry
- Instructions: "Scan with your phone to get the server URL"
- Close button

Use qrcode.react's QRCodeSVG component.
Match existing modal pattern from ConfirmModal.
  </action>
  <verify>Component renders QR code with server URL</verify>
  <done>ConnectionInfo component created with QR code and URL display</done>
</task>

<task type="auto">
  <name>Task 4: Add QR button to HostView header</name>
  <files>musicbingo_host/src/pages/HostView.jsx, musicbingo_host/src/pages/HostView.css</files>
  <action>
Add QR icon button in header-left (next to "Music Bingo Host" title):
- Small icon button with QR code SVG icon
- Click toggles ConnectionInfo modal
- Position doesn't require a game to be loaded
- Button styled to match app theme (dark background, green hover)
  </action>
  <verify>QR button visible in header, clicking opens modal</verify>
  <done>QR button added to header, modal toggles on click</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Build succeeds: `npm run build`
- [ ] QR button visible in header next to title
- [ ] Clicking button opens modal with QR code
- [ ] QR code contains server URL (e.g., http://localhost:8000)
- [ ] Scanning QR with phone camera shows the URL
</verification>

<success_criteria>
- Host app has QR code button in header
- Modal displays server URL as QR code and text
- Users can scan QR to get server URL for scanner app
</success_criteria>

<output>
After completion, create `.planning/phases/01-local-backend-infrastructure/01-04-SUMMARY.md`
</output>
